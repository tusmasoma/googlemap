# googlemap
## 背景
北海道をロードバイクで旅している際、近くのキャンプ場や温泉、コンビニの位置を知りたいと思った。これらの施設の位置関係を知ることで、効率的な移動計画やアクティビティの予定が立てやすくなるからだ。しかし、従来の方法ではこれらの情報を個別に調べる必要があり、非常に手間がかかってしまった。この煩雑さを解消するために「CampFinder」( https://campfinderjp.com/ )を開発することにした。そこで、JavaScriptとGoogle Maps APIを活用して実装を行った。

## 行ったこと
サイトにアクセスすると、非同期処理でスポットの情報を取得し、Google Maps APIを使用してマップにマーカーをセットします。ただし、最後の非同期処理でデータを取得してから24時間以内は、localStorageに保存されているデータを利用してマーカーをセットします。

さらに、

```_createMarker```メソッドの```updateMarkerVisibility```により、


マップのズームレベルに応じて、表示するスポットのマーカーの個数を制限し、視認性を向上させています。
また、現在の表示エリア外のスポットのマーカーは非表示とすることで、マップの表示が重くなることを防いでいます。

## 課題・論点
現状、マーカーの出現の優先度は

```zoomLevel >= spot.id % 7 + 6 || zoomLevel >= 9```

というように単純な分割に基づいている。これにより、ユーザーが最も求めている情報が一貫して最初に表示されるとは限らない可能性がある。

そこで、ユーザーのニーズや利用シーンに基づいたより高度な優先度のアルゴリズムを導入して、情報の表示を最適化したい。

## 付録
・実装コード

https://github.com/tusmasoma/campsitemap

